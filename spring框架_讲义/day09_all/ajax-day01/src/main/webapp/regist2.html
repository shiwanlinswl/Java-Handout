<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<script type="text/javascript" src="js/ajax.js">
</script>

<script type="text/javascript">
	function check(){
		//step1.　获得ajax对象
		var xhr = getXhr();
		//step2. 发送请求
		xhr.open('post','check.do',true);
		/*
			(了解)
			设置content-type消息头，告诉服务器
			浏览器对发送过来的数据如何编码（这儿
			采用的是key=value形式进行编码）。
		*/
		xhr.setRequestHeader('content-type',
				'application/x-www-form-urlencoded');
		xhr.onreadystatechange = function(){
			//step4.处理服务器返回的数据
			if(xhr.readyState == 4 && 
					xhr.status == 200){
				var txt = xhr.responseText;
				$('msg').innerHTML = txt;
			}
		};
		xhr.send('uname=' + $F('uname'));
	}
</script>
</head>
<body style="font-size:30px;">
	<form action="xxx.do" method="post">
		<fieldset>
			<legend>注册</legend>
			用户名:<input id="uname" name="uname" 
			onblur="check();"/>
			<span id="msg" style="color:red;"></span>
			<br/>
			密码:<input type="password" name="pwd"/><br/>
			<input type="submit" value="确定"/>
		</fieldset>
	</form>
</body>
</html>



